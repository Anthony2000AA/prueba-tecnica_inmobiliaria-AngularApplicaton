

<div class="principale-container">
    <div class="search-container">

        <div class="p-inputgroup">       
                <i class="pi pi-search"></i>
                <input type="text" (input)="toUppercase($event)" [(ngModel)]="projectName" pInputText placeholder="Search" #searchInput />
                <i class="pi pi-times" (click)="clearInput(searchInput)"></i>
        </div>
    
        <div class="container-date">
            <div class="card flex justify-content-center">
                <div class="container-label">
                    <label for="button">Fecha Inicio</label>
                    <label for="startDate" class="date-label">{{ startDate | date: 'dd/MM/yyyy' }}</label>
                </div>
                <p-calendar [(ngModel)]="startDate" [showIcon]="true"  appendTo="body"></p-calendar>
            </div>
            <div class="card flex justify-content-center">
                <div class="container-label">
                    <label for="button">Fecha Fin</label>
                    <label for="endDate" class="date-label">{{ endDate | date: 'dd/MM/yyyy' }}</label>
                </div>
                <p-calendar [(ngModel)]="endDate" [showIcon]="true"  appendTo="body"></p-calendar>
            </div>
    
           <div class="button-search">
            <p-button  (click)="filterByDateAndNameProject()" >Buscar</p-button>
           </div>  
        </div>

    </div>

    <div class="container-table">
        
        <p-table
            [value]="mortgageCreditList"
            [rows]="pageSize"
            [showCurrentPageReport]="true"
            [tableStyle]="{ 'min-width': '50rem' }"
        >
        <ng-template pTemplate="header">
            <tr>
                <th style="width:25%; color: rgb(108, 108, 109);">Cliente</th>
                <th style="width:15%; color: rgb(108, 108, 109);">Proyecto</th>
                <th style="width:10%; color: rgb(108, 108, 109);">Monto Total</th>
                <th style="width:10%; color: rgb(108, 108, 109);">Monto Parcial</th>
                <th style="width:20%"></th>
            </tr>
        </ng-template>

        <ng-template *ngIf="totalRecords >= 0" pTemplate="body" let-mortgageCredit>
            <tr>
                <td >{{ mortgageCredit.clientName }}</td>
                <td>{{ mortgageCredit.projectName }}</td>
                <td>S/. {{ mortgageCredit.totalAmount }}</td>
                <td>S/. {{ mortgageCredit.partialAmount }}</td>
                <td>
                    <p-button   class="p-button-rounded p-button-success" (click)="getMortgageCreditDetail(mortgageCredit.id, mortgageCredit.monthsRequested)">
                        MONTO / FECHA / SUBIR ARCHIVO
                    </p-button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">No se encontro registros</td>
            </tr>
        </ng-template>

        </p-table>

        <div class="pagination-container">
            <button pButton pRipple (click)="prevPage()" [disabled]="isFirstPage()" class="p-button-success">Prev</button>
            <label>Pagina {{ currentPage }} de {{ totalPages }}</label>
            <button pButton pRipple (click)="nextPage()" [disabled]="isLastPage()" class="p-button-success">Next</button>
        </div> 
    </div>
</div>

<div class="modal" *ngIf="showInstallmentsDetail">
    <div class="modal-content">
        <button class="close-button" (click)="closeModal()">Ã—</button>
        <app-installments-detail 
        [mortgageCreditId]="selectMortgageCreditId"
        [monthsRequired]="monthsRequired"
        ></app-installments-detail>
    </div>
</div>

<p-toast></p-toast>

<!--Loader-->
<div class="container-loader" *ngIf="loading">
    <app-loader></app-loader>
</div>
